<!DOCTYPE html>
<html lang="nl">
  <link rel="stylesheet" type="text/css" href="options.css">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PTA Platform - Mogelijkheden</title>
</head>
<body>
  <input type="text" maxlength="3" id="Afkorting-docent">
  <button type="button" onclick="ptaVanDocentKrijgen()">Ik wil de pta's die ik kan aanpassen zien</button>
  <div id="options-container">
    <h2>Mogelijkheden</h2>
    <!-- Voeg hier meer knoppen toe voor andere opties -->
  </div>

  <script>
    const optionsElement = document.getElementById('options-container')

    function redirectToOption(optionPage) {
      window.location.href = optionPage;
    }

    function ptaVanDocentKrijgen(){
      const docentId = document.getElementById('Afkorting-docent').value.toString().toUpperCase();
      console.log(docentId)
      // fetch(`/api/pta/search?responsible=${docentId}`, {
      fetch('/api/pta/all', {
        method: 'GET',
        headers: {
            'Content-Type': 'application/json',
        }
      })
    .then(response => {
      if (!response.ok) return
      return response.json()
    })
    .then(data => {
      console.log(JSON.stringify(data));

      for (let child of Array.from(optionsElement.children)) {
        if (child.nodeName === 'A') {
          optionsElement.removeChild(child);
        }
      }

      if (data === undefined || data === null || data.length === 0) {
        alert('Geen PTA\'s gevonden');
        return
      }

      for (let pta of data) {
        const button = document.createElement('a');
        button.textContent = pta.name;
        button.setAttribute('href', `ptamaken.html?id=${pta.id}&teacherId=${docentId}`)
        button.setAttribute('class', 'button');

        if (pta.responsible === docentId) {
          button.textContent += ' (Jouw PTA)';
        }

        // button.onclick = () => redirectToOption(`ptamaken.html?id=${pta.id}`);
        optionsElement.appendChild(button);
      }

      // alert('Data succesvol verstuurd!')
    })
    .catch((error) => {
        console.error('Fout bij het versturen van de aanvraag:', error);
      });
      }
  </script>

</body>
</html>