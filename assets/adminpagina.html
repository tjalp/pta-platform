<!DOCTYPE html>
<!DOCTYPE html>
<html lang="nl">
  <link rel="stylesheet" type="text/css" href="adminpagina.css">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PTA Platform - Adminpagina</title>
</head>

<body>
    <button type="button" onclick="PaginaTerug()">terug</button>
    <form id="AanpassingenVoorDropdown" onsubmit="dataVersturen(event)">        <h2>Soorten toetsen</h2>
        <div id="kloonbareVeld1">
            <div>
            <label for="toetsSoortVeld">Mogelijkheid 1:</label>
            <input type ="text" class="adminveld" id="toetsSoortVeld">
            </div>
        </div>
        <button type="button" onclick="voegExtraVeldToe('kloonbareVeld1')">voeg een extra veld toe</button>
        <button type="button" onclick="verwijderVeld('kloonbareVeld1')">Haal een veld weg</button>

        <h2>Tijdsmogelijkheden</h2>
        <div id="kloonbareVeld2">
            <div>
            <label for="TijdsMogelijkhedenVeld">Mogelijkheid 1:</label>
            <input type="text" class="adminveld" id="TijdsMogelijkhedenVeld">
            </div>
        </div>
        <button type="button" onclick="voegExtraVeldToe('kloonbareVeld2')">voeg een extra veld toe</button>
        <button type="button" onclick="verwijderVeld('kloonbareVeld2')">Haal een veld weg</button>

        <input type="submit" class="button" value="lever de aanpassingen in">
        <h2>Staandaardhulpmiddelen</h2> 
        <div id="kloonbareVeld3">
            <div>
            <label for="hulpmiddelenVeld">Mogelijkheid 1:</label>
            <input type="text" class="adminveld" id="hulpmiddelenVeld">
            </div>
        </div>
        <button type="button" onclick="voegExtraVeldToe('kloonbareVeld3')">voeg een extra veld toe</button>
        <button type="button" onclick="verwijderVeld('kloonbareVeld3')">Haal een veld weg</button>

        <input type="submit" class="button" value="lever de aanpassingen in">
    </form>
    <form id="periodes" onsubmit="periodesOpslaan(event)">
    <h2>Periodes</h2>
    <label for="periode1">Periode 1:</label>
    <div id="periode1">
        <label class="adminlabel" for="startPeriode1">Start periode 1</label>
        <input type ="text" class="adminveld" id="startPeriode1">
        <label class="adminlabel" for="eindPeriode1">Eind periode 1</label>
        <input type ="text" class="adminveld" id="eindPeriode1">
    </div>
    <label for="periode2">Periode 2:</label>
    <div id="periode2">
        <label class="adminlabel" for="startPeriode2">Start periode 2</label>
        <input type ="text" class="adminveld" id="startPeriode2">
        <label class="adminlabel" for="eindPeriode2">Eind periode 2</label>
        <input type ="text" class="adminveld" id="eindPeriode2">
    </div>
    <label for="periode3">Periode 3:</label>
    <div id="periode3">
        <label class="adminlabel" for="startPeriode3">Start periode 3</label>
        <input type ="text" class="adminveld" id="startPeriode3">
        <label class="adminlabel" for="eindPeriode3">Eind periode 3</label>
        <input type ="text" class="adminveld" id="eindPeriode3">
    </div>
    <label for="periode4">Periode 4:</label>
    <div id="periode4">
        <label class="adminlabel" for="startPeriode4">Start periode 4</label>
        <input type ="text" class="adminveld" id="startPeriode4">
        <label class="adminlabel" for="eindPeriode4">Eind periode 4</label>
        <input type ="text" class="adminveld" id="eindPeriode4">
    </div>
    <input type="submit" value="periodes opslaan">
    </form>
    <form id="VakkenPtaSchool" onsubmit="vakkenPtaOpslaan()">
        <h2>Vakken 6 Vwo</h2>
        <div id="vakkenVwo6">

        </div>
        <input type="number" id="nummerVakken6Vwo">
        <button type="button" onclick="voegExtraVakToe('vakkenVwo6', 'nummerVakken6Vwo')">Extra vak 6 Vwo</button>
        <button type="button" onclick="verwijderVeld('vakkenVwo6')">Vak minder 6 Vwo</button>
        <h2>Vakken 5 Vwo</h2>
        <div id="vakkenVwo5">

        </div>
        <input type="number" id="nummerVakken5Vwo">
        <button type="button" onclick="voegExtraVakToe('vakkenVwo5', 'nummerVakken5Vwo')">Extra vak 5 Vwo</button>
        <button type="button" onclick="verwijderVeld('vakkenVwo5')">Vak minder 5 Vwo</button>
        <h2>Vakken 4 Vwo</h2>
        <div id="vakkenVwo4">

        </div>
        <input type="number" id="nummerVakken4Vwo">
        <button type="button" onclick="voegExtraVakToe('vakkenVwo4', 'nummerVakken4Vwo')">Extra vak 4 Vwo</button>
        <button type="button" onclick="verwijderVeld('vakkenVwo4')">Vak minder 4 Vwo</button>
        <h2>Vakken 5 Havo</h2>
        <div id="vakkenHavo5">

        </div>
        <input type="number" id="nummerVakken5Havo">
        <button type="button" onclick="voegExtraVakToe('vakkenHavo5', 'nummerVakken5Havo')">Extra vak 5 Havo</button>
        <button type="button" onclick="verwijderVeld('vakkenHavo5')">Vak minde 5 Havo</button>
        <h2>Vakken 4 Havo</h2>
        <div id="vakkenHavo4">

        </div>
        <input type="number" id="nummerVakken4Havo">
        <button type="button" onclick="voegExtraVakToe('vakkenHavo4', 'nummerVakken4Havo')">Extra vak 4 Havo</button>
        <button type="button" onclick="verwijderVeld('vakkenHavo4')">Vak minder 4 Havo</button>
        <h2>Vakken 4 Mavo</h2>
        <div id="vakkenMavo4">

        </div>
        <input type="number" id="nummerVakken4Mavo">
        <button type="button" onclick="voegExtraVakToe('vakkenMavo4', 'nummerVakken4Mavo')">Extra vak 4 Mavo</button>
        <button type="button" onclick="verwijderVeld('vakkenMavo4')">Vak minder 4 Mavo</button>

        <h2>Vakken 3 Mavo</h2>
        <div id="vakkenMavo3">

        </div>
        <input type="number" id="nummerVakken3Mavo">
        <button type="button" onclick="voegExtraVakToe('vakkenMavo3','nummerVakken3Mavo' )">Extra vak 3 Mavo</button>
        <button type="button" onclick="verwijderVeld('vakkenMavo3')">Vak minder 3 Mavo</button>

        <input type="submit" value="Vakken opslaan">
    </form>
    <h2>Docenten</h2>
    <form id="VerantwoordelijkeDocentenPta">
    </form>
    <button type="button" onclick="docentenPtaOpslaan()">Lever de docenten in</button>
    <script>
        function voegExtraVeldToe(containerId) {
      var container = document.getElementById(containerId);
      var newFieldNumber = container.children.length + 1;

      // Create a div to contain the label and input
      var fieldContainer = document.createElement('div');

      var label = document.createElement('label');
      label.setAttribute('for', containerId + '_field' + newFieldNumber);
      label.textContent = 'Mogelijkheid ' + newFieldNumber + ':';

      var input = document.createElement('input');
      input.setAttribute('type', 'text');
      input.setAttribute('id', containerId + '_field' + newFieldNumber);
      input.setAttribute('name', containerId + '_field' + newFieldNumber);

      // Append label and input to the field container
      fieldContainer.appendChild(label);
      fieldContainer.appendChild(input);

      // Append the field container to the main container
      container.appendChild(fieldContainer);
    }

    function dataVersturen(event){
            event.preventDefault(); // Voorkomt dat het formulier echt wordt ingediend
            
            // Vind alle input velden binnen het formulier
            var inputs = document.querySelectorAll('#AanpassingenVoorDropdown input[type="text"]');
            var data = {};
            inputs.forEach(function(input, index) {
                data[input.name] = input.value; // Voeg de naam en waarde van elk veld toe aan het data object
            });
            console.log(data); // Log de verzamelde data naar de console

            // Hier kan je de data versturen naar een server of iets anders doen met de data
        }

    function verwijderVeld(containerId) {
    var container = document.getElementById(containerId);
    if (container.children.length > 1) { // Controleert of er meer dan één veld is
        container.removeChild(container.lastChild);
    } else {
        alert('Er kunnen niet meer velden verwijderd worden.');
    }
    }

    function PaginaTerug(){
        window.location.href = 'options.html';
    }

    function voegExtraVakToe(containerId, aantalId) {
      var container = document.getElementById(containerId);
      var aantal = document.getElementById(aantalId).value
      for(i = 0; i < aantal; i ++){
        var newFieldNumber = container.children.length + 1;

        // Create a div to contain the label and input
        var fieldContainer = document.createElement('div');

        var label = document.createElement('label');
        label.setAttribute('for', containerId + '_field' + newFieldNumber);
        label.textContent = 'vak ' + newFieldNumber + ':';

        var input = document.createElement('input');
        input.setAttribute('type', 'text');
        input.setAttribute('id', containerId + '_field' + newFieldNumber);
        input.setAttribute('name', containerId + '_field' + newFieldNumber);

        // Append label and input to the field container
        fieldContainer.appendChild(label);
        fieldContainer.appendChild(input);

        // Append the field container to the main container
        container.appendChild(fieldContainer);
      }
    }

    function vakkenPtaOpslaan(){
    event.preventDefault(); // Voorkom het standaard verzenden van het formulier

    // Leeg de form VerantwoordelijkeDocentenPta voordat je nieuwe velden toevoegt
    var formDocentenPta = document.getElementById('VerantwoordelijkeDocentenPta');
    formDocentenPta.innerHTML = '';

    // Een lijst van alle vakken containers met hun respectievelijke niveaus en jaargangen
    var containers = [
        { id: 'vakkenVwo6', niveau: '6 Vwo' },
        { id: 'vakkenVwo5', niveau: '5 Vwo' },
        { id: 'vakkenVwo4', niveau: '4 Vwo' },
        { id: 'vakkenHavo5', niveau: '5 Havo' },
        { id: 'vakkenHavo4', niveau: '4 Havo' },
        { id: 'vakkenMavo4', niveau: '4 Mavo' },
        { id: 'vakkenMavo3', niveau: '3 Mavo' }
    ];

    // Loop door elke container en verwerk de vakken
    containers.forEach(function(container) {
        var vakkenInputs = document.querySelectorAll('#' + container.id + ' input[type="text"]');
        vakkenInputs.forEach(function(input, index) {
            var volledigeNaam = input.value + ' (' + container.niveau + ')'; // Combineer de vaknaam met het niveau en jaargang
            var label = document.createElement('label');
            label.setAttribute('for', 'docent_' + container.id + '_' + index);
            label.textContent = volledigeNaam + ':';

            var inputDocent = document.createElement('input');
            inputDocent.setAttribute('type', 'text');
            inputDocent.setAttribute('id', 'docent_' + container.id + '_' + index);
            inputDocent.setAttribute('name', 'docent_' + container.id + '_' + index);

            formDocentenPta.appendChild(label);
            formDocentenPta.appendChild(inputDocent);
            formDocentenPta.appendChild(document.createElement('br')); // Voeg een line break toe voor nette indeling
        });
    });
}

    function vakkenOphalen(){
        fetch(`/api/defaults/subjects`)
        .then(response => {
                if (!response.ok) {
                    throw new Error('Netwerkrespons was niet ok');
                }
                return response.json();
        })
        .then(data =>{
            vakken = data;
            vakkenLaden()
        })
        .catch(error => {
                console.error('Fout bij het laden:', error);
            });
    }

    function vakkenLaden(){
        const formDocentenPta = document.getElementById('VerantwoordelijkeDocentenPta');
        const volledigeNaam = Array.from(vakken).sort((a, b) => a.name.localeCompare(b.name));
        console.log(vakken)
        for(i = 0; i < volledigeNaam.length; i ++){
            var label = document.createElement('label');
            label.textContent = volledigeNaam[i].name + " (" + volledigeNaam[i].level + ")" + ':';

            var inputDocent = document.createElement('input');
            inputDocent.setAttribute('type', 'text');
            inputDocent.setAttribute('id', 'docent_' + i);
            inputDocent.setAttribute('name', 'docent_'+ i);

            var input = document.createElement('input');           
            input.setAttribute('type', 'text'); 
            input.setAttribute('id', '_field' + i); // Gecorrigeerd
            input.setAttribute('name', '_field' + i); // Gecorrigeerd

            formDocentenPta.appendChild(label);
            formDocentenPta.appendChild(inputDocent);
            formDocentenPta.appendChild(document.createElement('br')); // Voeg een line break toe voor nette indeling
            var input = document.createElement('input');
        }

    }

    function periodesOpslaan(event) {
            event.preventDefault(); // Prevent the default form submission

            // Gather data from the form
            var periodesData = {
                periode1: {
                    start: document.getElementById("startPeriode1").value,
                    eind: document.getElementById("eindPeriode1").value
                },
                periode2: {
                    start: document.getElementById("startPeriode2").value,
                    eind: document.getElementById("eindPeriode2").value
                },
                periode3: {
                    start: document.getElementById("startPeriode3").value,
                    eind: document.getElementById("eindPeriode3").value
                },
                periode4: {
                    start: document.getElementById("startPeriode4").value,
                    eind: document.getElementById("eindPeriode4").value
                }
            };

            // Send the data to your backend using fetch
           console.log(periodesData)
        }


    vakkenOphalen()


    </script>
</body>